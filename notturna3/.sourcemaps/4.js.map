{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, LoadingController, Loading } from 'ionic-angular';\nimport { Http, Headers } from '@angular/http';\nimport 'rxjs/add/operator/map';\n\nimport { AuthService } from '../../providers/auth-service/auth-service';\n\n\nexport class User {\n  username: string;\n  userid: string;\n  fulldata: Array<any>;\n  skill: Array<any>;\n \n  constructor(username: string, userid: string) {\n    this.username = username;\n    this.userid = userid;\n  }\n}\n\n\n\n/**\n * Generated class for the LoginPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  \n  username = '';\n  userid = '';\n  currentUser: User;\n\tsaveme= {\n\t\tchecked: false \n\t};\n  \n  loading: Loading;\n  registerCredentials = { username: '', email: '' , password: '' };\n\n  // constructor(public navCtrl: NavController) {\n  constructor(private nav: NavController, private auth: AuthService,  private loadingCtrl: LoadingController, public http: Http) {\n\t\tthis.registerCredentials.username=window.localStorage.getItem( \"notturnauserid\" );\n\t\tthis.registerCredentials.password=window.localStorage.getItem( \"notturnapasswd\" );\n\t\tif (this.registerCredentials.username != '' )  { this.saveme.checked = true; }\n  }\n\n  public createAccount() {\n    this.nav.push('RegisterPage');\n  }\n\n  public login() {\n   \n    this.currentUser = new User(this.registerCredentials.username , \"0\"); \n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json'); \n    var link = 'http://www.roma-by-night.it/ionicPHP/login.php';\n    var mypost = JSON.stringify({username: this.registerCredentials.username , password: this.registerCredentials.password });\n   \n    this.showLoading(\"Please wait...\");\n   \n    this.http.post(link, mypost, headers)\n    .map(res => res.json())\n    .subscribe(res =>  {    \n       \n      this.currentUser['userid'] = res[\"idutente\"];\n      this.currentUser.fulldata = res;\n        \n      this.loading.dismiss();\n\t\t\t\n\t\t\t//save if required\n\t\t\t\n\t\t\tif ( this.saveme.checked == true ) {\n\t\t\t\twindow.localStorage.setItem( \"notturnauserid\" , this.registerCredentials.username );\n\t\t\t\twindow.localStorage.setItem( \"notturnapasswd\" , this.registerCredentials.password );\n\t\t\t} else {\n\t\t\t\twindow.localStorage.removeItem( \"notturnauserid\" );\n\t\t\t\twindow.localStorage.removeItem( \"notturnapasswd\" );\n\t\t\t}\n        \n      // do other stuff\n      var link = 'http://www.roma-by-night.it/ionicPHP/skill.php';\n      var mypost = JSON.stringify({userid: this.currentUser['userid'] });   \n      \n      this.showLoading(\"Loading data...\");\n      \n      this.http.post(link, mypost)\n      .map(res => res.json())\n      .subscribe(res => {\n            \n        this.currentUser.skill = res;\n        this.auth.createUserInfo();\n        this.auth.setUserInfo(this.currentUser);\n\n        this.loading.dismiss();     \n        this.nav.push('TabsPage'); \n          \n          \n      }, (err) => {\n        this.loading.dismiss();\n        alert ('Error loading data2');  \n      });                           \n    }, (err) => {\n      this.loading.dismiss();\n      switch ( err['statusText'] ) {\n        case \"Unauthorized\":\n          alert(\"Non autorizzato\");\n          break;\n        case \"Not Found\":\n          alert(\"Scheda non trovata\");\n          break;\n        default:\n          alert(\"Server error\");\n      }\n    });  \n  }\n\n  showLoading(text) {\n    this.loading = this.loadingCtrl.create({\n      content: text,\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}